{
  "schemaType": "VISUALIZATION",
  "id": "nr-mapbox",
  "displayName": "Map Widget",
  "description": "Labs Widget Pack - Map Widget",
  "configuration": [
    {
      "name": "showDocs",
      "title": "Show Documentation",
      "description": "",
      "type": "boolean"
    },
    {
      "name": "debugEnabled",
      "title": "Log additional information to the console",
      "description": "",
      "type": "boolean"
    },
    {
      "name": "mapSystem",
      "title": "Map System (default: leaflet)",
      "description": "",
      "type": "enum",
      "items": [
        {
          "title": "Leaflet",
          "value": "leaflet"
        },
        {
          "title": "Map Box",
          "value": "mapbox"
        }
      ]
    },
    {
      "name": "mapBoxToken",
      "title": "Map Box Access Token (required for Mapbox)",
      "description": "Go to https://account.mapbox.com/auth/signup/ to sign up and get a Access Token.",
      "type": "string"
    },
    {
      "name": "nrqlQueries",
      "title": "NRQL Queries",
      "description": "NRQL queries for marker data (must include `name:` alias and lat/lng)",
      "type": "collection",
      "items": [
        {
          "name": "accountId",
          "title": "Account ID",
          "description": "Account ID to be associated with the query",
          "type": "account-id"
        },
        {
          "name": "query",
          "title": "Query",
          "description": "NRQL query for the visualization",
          "type": "nrql"
        },
        {
          "name": "useNameAsLabel",
          "title": "Use Name As Label",
          "description": "Use the 'name:' alias as the label for markers (doesn't apply to HD mode)",
          "type": "boolean"
        },
        {
          "name": "enableFilters",
          "title": "Enable dashboard filters",
          "description": "Allows the use of dashboard filters",
          "type": "boolean"
        },
        {
          "name": "enableTimePicker",
          "title": "Enable Time Picker",
          "description": "Allows the use of the time picker",
          "type": "boolean"
        }
      ]
    },
    {
      "name": "pollInterval",
      "title": "Select Poll Interval (seconds) default 60s",
      "description": "Rate at which the data is refreshed",
      "type": "enum",
      "items": [
        {
          "title": "Select",
          "value": 60
        },
        {
          "title": "5s",
          "value": 5
        },
        {
          "title": "10s",
          "value": 10
        },
        {
          "title": "15s",
          "value": 15
        },
        {
          "title": "30s",
          "value": 30
        },
        {
          "title": "45s",
          "value": 45
        },
        {
          "title": "1m",
          "value": 60
        },
        {
          "title": "5m",
          "value": 300
        }
      ]
    },
    {
      "name": "initialLat",
      "title": "Initial Latitude",
      "description": "Initial latitude for the map center",
      "type": "string"
    },
    {
      "name": "initialLong",
      "title": "Initial Longitude",
      "description": "Initial longitude for the map center",
      "type": "string"
    },
    {
      "name": "initialZoom",
      "title": "Initial Zoom",
      "description": "Initial zoom level for the map center (1=world, 18=street level)",
      "type": "number"
    },
    {
      "name": "maxBoundsSouthWest",
      "title": "Max Bounds - Southwest corner eg. '35.5249, -124.6694' - Northeast config required",
      "description": "Restricts the view to the given geographical bounds, bouncing the user back if the user tries to pan outside the view",
      "type": "string"
    },
    {
      "name": "maxBoundsNorthEast",
      "title": "Max Bounds - Northeast corner eg. '40.0249, -120.1694' - Southeast config required",
      "description": "Restricts the view to the given geographical bounds, bouncing the user back if the user tries to pan outside the view",
      "type": "string"
    },
    {
      "name": "defaultMarkerColor",
      "title": "Default Marker Color",
      "description": "Fallback color for markers without threshold match (e.g., 'green', 'blue', '#FF5733')",
      "type": "string"
    },
    {
      "name": "markerStyle",
      "title": "Marker Style",
      "description": "Visual style for markers: pin (default) or circle (modern)",
      "type": "enum",
      "items": [
        {
          "title": "Pin (Classic)",
          "value": "pin"
        },
        {
          "title": "Circle (Modern)",
          "value": "circle"
        }
      ]
    },
    {
      "name": "defaultMarkerImgURL",
      "title": "Default Marker Image URL (overrides default marker color)",
      "description": "Custom marker icon URL (overrides color)",
      "type": "string"
    },
    {
      "name": "defaultImgWidth",
      "title": "Image width (default 25)",
      "description": "Marker icon width in pixels",
      "type": "number"
    },
    {
      "name": "defaultImgHeight",
      "title": "Image height (default 25)",
      "description": "Marker icon height in pixels",
      "type": "number"
    },
    {
      "name": "mapStyle",
      "title": "Select MapBox Style (MapBox only)",
      "description": "",
      "type": "enum",
      "items": [
        {
          "title": "Select",
          "value": null
        },
        {
          "title": "streets-v11",
          "value": "mapbox://styles/mapbox/streets-v11"
        },
        {
          "title": "outdoors-v11",
          "value": "mapbox://styles/mapbox/outdoors-v11"
        },
        {
          "title": "light-v10",
          "value": "mapbox://styles/mapbox/light-v10"
        },
        {
          "title": "dark-v10",
          "value": "mapbox://styles/mapbox/dark-v10"
        },
        {
          "title": "satellite-v9",
          "value": "mapbox://styles/mapbox/satellite-v9"
        },
        {
          "title": "satellite-streets-v11",
          "value": "mapbox://styles/mapbox/satellite-streets-v11"
        },
        {
          "title": "navigation-day-v1",
          "value": "mapbox://styles/mapbox/navigation-day-v1"
        },
        {
          "title": "navigation-night-v1",
          "value": "mapbox://styles/mapbox/navigation-night-v1"
        }
      ]
    },
    {
      "name": "markerThresholds",
      "title": "Marker Configuration",
      "type": "collection",
      "items": [
        {
          "name": "priority",
          "title": "Validation priority (0 is highest) (optional)",
          "description": "",
          "type": "number"
        },
        {
          "name": "targetAttribute",
          "title": "Target Attribute eg. count, appName etc.",
          "description": "",
          "type": "string"
        },
        {
          "name": "regexMatch",
          "title": "Regex Match (cannot be used with value equal, above, below)",
          "description": "",
          "type": "string"
        },
        {
          "name": "valueEqual",
          "title": "Value equal = (numeric)",
          "description": "",
          "type": "string"
        },
        {
          "name": "valueAbove",
          "title": "Value above > (numeric)",
          "description": "",
          "type": "number"
        },
        {
          "name": "valueBelow",
          "title": "Value below < (numeric)",
          "description": "",
          "type": "number"
        },
        {
          "name": "nullHandling",
          "title": "Trigger if undefined or null",
          "description": "",
          "type": "boolean"
        },
        {
          "name": "zeroHandling",
          "title": "Trigger if zero",
          "description": "",
          "type": "boolean"
        },
        {
          "name": "emptyHandling",
          "title": "Trigger if empty string",
          "description": "",
          "type": "boolean"
        },
        {
          "name": "status",
          "title": "Status (for cluster aggregation)",
          "description": "Set marker status for cluster pie chart visualization",
          "type": "enum",
          "items": [
            {
              "title": "None (no status)",
              "value": "NONE"
            },
            {
              "title": "OK",
              "value": "OK"
            },
            {
              "title": "Warning",
              "value": "WARNING"
            },
            {
              "title": "Critical",
              "value": "CRITICAL"
            }
          ]
        },
        {
          "name": "markerColor",
          "title": "Marker Color",
          "description": "",
          "type": "string"
        },
        {
          "name": "imgUrl",
          "title": "Image URL (overrides marker color)",
          "description": "",
          "type": "string"
        },
        {
          "name": "imgWidth",
          "title": "Image width (default 25)",
          "description": "",
          "type": "number"
        },
        {
          "name": "imgHeight",
          "title": "Image height (default 25)",
          "description": "",
          "type": "number"
        }
      ]
    },
    {
      "name": "markerAggregation",
      "title": "Marker aggregation",
      "description": "Display value of clustered markers",
      "type": "enum",
      "items": [
        {
          "title": "Show count of markers",
          "value": "count"
        },
        {
          "title": "Show sum of markers",
          "value": "sum"
        },
        {
          "title": "Show mean average of markers",
          "value": "average"
        },
        {
          "title": "Show max of markers",
          "value": "max"
        },
        {
          "title": "Show min of markers",
          "value": "min"
        }
      ]
    },
    {
      "name": "markerColors",
      "title": "Marker colors",
      "description": "A comma separated list of hex colours in the order: cluster,no-status,ok,warning,critical. For heatmap mode, provide color stops.",
      "type": "string"
    },
    {
      "name": "enableClustering",
      "title": "Enable Marker Clustering",
      "description": "Toggle marker clustering on/off (default: off)",
      "type": "boolean"
    },
    {
      "name": "disableClusterZoom",
      "title": "Disable Clustering at Zoom Level",
      "description": "Zoom level at which clustering is disabled and all markers are shown (default: 7)",
      "type": "number"
    },
    {
      "name": "heatmapSteps",
      "title": "Marker Heatmap Steps",
      "description": "Number of color steps for marker heatmap gradient. Set to 0 or leave empty to disable heatmap mode.",
      "type": "number"
    },
    {
      "name": "highDensityMode",
      "title": "High Density Mode",
      "description": "Enable performance-optimized rendering using CircleMarkers for large datasets (1000+ points)",
      "type": "boolean"
    },
    {
      "name": "highDensityRadius",
      "title": "High Density Circle Radius",
      "description": "Radius in pixels for high density mode markers (default: 6)",
      "type": "number"
    },
    {
      "name": "regionHeatmapSteps",
      "title": "Region Heatmap Steps",
      "description": "Number of color steps for region heatmap. Set to 0 or leave empty to disable.",
      "type": "number"
    },
    {
      "name": "regionColors",
      "title": "Region Heatmap Colors",
      "description": "Comma separated hex colors for region heatmap gradient stops",
      "type": "string"
    },
    {
      "name": "regionAccountId",
      "title": "Region Query Account ID",
      "description": "Account ID for the region query (defaults to first marker query account)",
      "type": "account-id"
    },
    {
      "name": "regionQuery",
      "title": "Region Query (NRQL)",
      "description": "Separate NRQL query for region data. Use geoISOCountry, geoUSState, geoUKRegion, or geoCANProvince fields to match GeoJSON.",
      "type": "nrql"
    },
    {
      "name": "enableRegionTimePicker",
      "title": "Enable Time Picker for Region Query",
      "description": "Apply the dashboard time picker to the region query",
      "type": "boolean"
    },
    {
      "name": "hideMarkers",
      "title": "Disable Markers (default: false)",
      "description": "Toggle to hide all markers/clusters on the map - useful to only show region heatmap",
      "type": "boolean"
    },
    {
      "name": "enableAutoTooltip",
      "title": "Auto-generate Tooltips (default: false)",
      "description": "Automatically generate tooltip content from tooltip_* prefixed fields in query results",
      "type": "boolean"
    }
  ]
}